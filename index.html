<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>HackBall Client</title>
  <style>
    canvas { background: #222; display: block; margin: 20px auto; border: 2px solid #fff; }
  </style>
</head>
<body>

<canvas id="game" width="600" height="400"></canvas>

<script>
  // Burada WebSocket URL'ini kendi sunucu adresinle değiştir
  const ws = new WebSocket('wss://YOUR_SERVER_URL');

  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  let players = {};
  let ball = { x: 300, y: 200 };

  ws.onmessage = event => {
    const data = JSON.parse(event.data);
    if(data.type === 'gameState') {
      players = data.players;
      ball = data.ball;
    }
  };

  window.addEventListener('keydown', e => {
    let dir = null;
    if(e.key === 'ArrowLeft') dir = 'left';
    else if(e.key === 'ArrowRight') dir = 'right';
    else if(e.key === 'ArrowUp') dir = 'up';
    else if(e.key === 'ArrowDown') dir = 'down';

    if(dir) {
      ws.send(JSON.stringify({ type: 'move', dir }));
    }
  });

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = 'white';
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, 10, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle = 'red';
    for(let id in players) {
      let p = players[id];
      ctx.beginPath();
      ctx.arc(p.x, p.y, 15, 0, Math.PI*2);
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }
  draw();
</script>

</body>
</html>
